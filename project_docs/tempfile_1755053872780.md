
# 数据处理与可视化系统项目文档

## 1. 项目概述

本项目是一个数据处理与可视化系统，包含首页、关于、帮助、数据填报、数据展示、数据处理、数据可视化、数据预测、用户中心等九大核心模块。系统采用前后端分离架构，前端使用 Vue.js，后端使用 Django，数据存储使用 MySQL，数据可视化使用 ECharts，数据处理使用 Python。

### 1.1 技术栈

- 前端: Vue.js 3 + Element Plus
- 后端: Django 4 + Django REST Framework
- 数据库: MySQL 8.0
- 数据处理: Python (pandas, numpy)
- 数据可视化: ECharts 5
- 部署: Docker (可选)

## 2. 系统架构设计

### 2.1 整体架构图

```

┌─────────────────┐    HTTP    ┌──────────────────────┐
│   Vue.js 前端   │ ──────────▶ │   Django REST API    │
└─────────────────┘             └──────────────────────┘
                                        │
                                ┌───────▼────────┐
                                │  MySQL 数据库  │
                                └────────────────┘
```
### 2.2 模块结构设计

```

project/
├── backend/                    # Django 后端项目
│   ├── manage.py
│   ├── config/                 # 项目配置
│   ├── users/                  # 用户模块
│   ├── home/                   # 首页模块
│   ├── about/                  # 关于模块
│   ├── help/                   # 帮助模块
│   ├── data_entry/             # 数据填报模块
│   ├── data_display/           # 数据展示模块
│   ├── data_processing/        # 数据处理模块
│   ├── data_visualization/     # 数据可视化模块
│   ├── data_prediction/        # 数据预测模块
│   └── user_center/            # 用户中心模块
├── frontend/                   # Vue.js 前端项目
│   ├── public/
│   ├── src/
│   │   ├── assets/
│   │   ├── components/
│   │   ├── views/
│   │   ├── router/
│   │   ├── store/
│   │   └── App.vue
│   └── package.json
└── docker/                     # Docker 配置文件(可选)
```
## 3. 各模块详细功能与实现思路

### 3.1 首页模块 (home)

**功能描述：**
- 展示系统概览信息
- 提供快速导航入口
- 显示系统最新动态

**实现思路：**
- 设计简洁美观的首页布局
- 集成各模块的快速访问入口
- 展示系统统计数据和图表摘要
- 使用 Element Plus 组件构建界面

### 3.2 关于模块 (about)

**功能描述：**
- 展示系统介绍信息
- 团队信息展示
- 版本信息展示

**实现思路：**
- 静态页面展示相关信息
- 可配置的团队成员信息
- 系统版本更新记录展示

### 3.3 帮助模块 (help)

**功能描述：**
- 提供系统使用帮助文档
- FAQ常见问题解答
- 联系方式展示

**实现思路：**
- 文档分类管理
- 搜索功能实现
- 用户反馈收集机制

### 3.4 数据填报模块 (data_entry)

**功能描述：**
- 提供数据录入界面
- 支持多种数据格式导入
- 数据校验与错误提示

**实现思路：**
- 表单设计与验证
- Excel/CSV 文件导入功能
- 实时数据校验
- 批量导入与单条录入两种方式

### 3.5 数据展示模块 (data_display)

**功能描述：**
- 以表格形式展示原始数据
- 支持数据筛选、排序、分页
- 数据导出功能

**实现思路：**
- 使用 Element Plus 表格组件
- 实现分页查询接口
- 支持多字段筛选
- 数据导出为 Excel/CSV 格式

### 3.6 数据处理模块 (data_processing) - 当前重点实现

**功能描述：**
- 数据清洗与预处理
- 数据转换与计算
- 数据质量分析
- 处理任务管理

**实现思路：**
- 基于 pandas 实现数据处理逻辑
- 提供可视化处理流程配置
- 支持自定义处理脚本
- 处理任务队列管理
- 处理结果预览与保存

**核心功能实现：**
1. 数据清洗：
   - 缺失值处理（删除、填充）
   - 异常值检测与处理
   - 重复数据处理
   - 数据类型转换

2. 数据转换：
   - 数据归一化/标准化
   - 数据分箱处理
   - 特征工程
   - 数据聚合计算

3. 处理任务管理：
   - 处理流程配置
   - 批量处理任务
   - 处理进度监控
   - 处理结果查看

**API 接口设计：**
- `POST /api/processing/tasks/` - 创建处理任务
- `GET /api/processing/tasks/` - 获取任务列表
- `GET /api/processing/tasks/{id}/` - 获取任务详情
- `POST /api/processing/tasks/{id}/execute/` - 执行处理任务
- `GET /api/processing/tasks/{id}/result/` - 获取处理结果

### 3.7 数据可视化模块 (data_visualization) - 当前重点实现

**功能描述：**
- 多种图表类型展示数据
- 自定义图表配置
- 交互式图表操作
- 图表导出功能

**实现思路：**
- 集成 ECharts 图表库
- 提供图表配置界面
- 支持常见图表类型（折线图、柱状图、饼图、散点图等）
- 图表数据绑定与实时更新
- 图表导出为图片或 PDF

**核心功能实现：**
1. 图表类型支持：
   - 折线图(Line Chart)
   - 柱状图(Bar Chart)
   - 饼图(Pie Chart)
   - 散点图(Scatter Chart)
   - 热力图(Heatmap)
   - 地图(Map)
   - 仪表盘(Gauge)

2. 图表配置：
   - 数据源选择
   - 图表类型选择
   - 样式自定义
   - 交互设置

3. 图表管理：
   - 图表保存与复用
   - 图表分组管理
   - 图表分享功能

**API 接口设计：**
- `POST /api/charts/` - 创建图表
- `GET /api/charts/` - 获取图表列表
- `GET /api/charts/{id}/` - 获取图表详情
- `PUT /api/charts/{id}/` - 更新图表配置
- `DELETE /api/charts/{id}/` - 删除图表
- `GET /api/charts/{id}/data/` - 获取图表数据

### 3.8 数据预测模块 (data_prediction)

**功能描述：**
- 基于历史数据进行预测分析
- 多种预测模型支持
- 预测结果可视化展示
- 预测模型管理

**实现思路：**
- 集成 scikit-learn 机器学习库
- 提供预测模型配置界面
- 支持常见预测算法（线性回归、时间序列等）
- 预测结果评估与可视化

### 3.9 用户中心模块 (user_center)

**功能描述：**
- 用户个人信息管理
- 权限管理
- 操作日志记录
- 系统设置

**实现思路：**
- 用户信息维护
- 角色权限控制
- 操作审计日志
- 个性化设置

## 4. 数据库设计

### 4.1 核心数据表

```
sql
-- 用户表
CREATE TABLE users (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(150) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(128) NOT NULL,
    first_name VARCHAR(150),
    last_name VARCHAR(150),
    is_active BOOLEAN DEFAULT TRUE,
    is_staff BOOLEAN DEFAULT FALSE,
    date_joined DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 数据集表
CREATE TABLE datasets (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    file_path VARCHAR(500),
    file_size BIGINT,
    row_count INT,
    column_count INT,
    created_by INT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- 数据处理任务表
CREATE TABLE processing_tasks (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    dataset_id INT,
    config JSON,
    status ENUM('pending', 'running', 'completed', 'failed') DEFAULT 'pending',
    result_dataset_id INT NULL,
    created_by INT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (dataset_id) REFERENCES datasets(id),
    FOREIGN KEY (result_dataset_id) REFERENCES datasets(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- 图表配置表
CREATE TABLE charts (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    chart_type VARCHAR(50),
    config JSON,
    dataset_id INT,
    created_by INT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (dataset_id) REFERENCES datasets(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);
```
## 5. 当前重点模块实现细节

### 5.1 数据处理模块实现

#### 5.1.1 后端实现

**核心处理类设计：**
```
python
# data_processing/services/processor.py
class DataProcessor:
    def __init__(self, dataset_path):
        self.df = pd.read_csv(dataset_path)
    
    def clean_data(self, config):
        # 缺失值处理
        if config.get('handle_missing') == 'drop':
            self.df.dropna(inplace=True)
        elif config.get('handle_missing') == 'fill':
            self.df.fillna(config.get('fill_value'), inplace=True)
        
        # 异常值处理
        if config.get('handle_outliers'):
            # 实现异常值检测和处理逻辑
            pass
        
        return self.df
    
    def transform_data(self, config):
        # 数据转换逻辑
        pass
    
    def save_processed_data(self, output_path):
        self.df.to_csv(output_path, index=False)
```
#### 5.1.2 前端实现

**处理任务配置界面：**
- 提供可视化配置面板
- 实时预览处理效果
- 任务执行状态监控

### 5.2 数据可视化模块实现

#### 5.2.1 后端实现

**图表配置管理：**
```
python
# data_visualization/models.py
class Chart(models.Model):
    CHART_TYPES = [
        ('line', '折线图'),
        ('bar', '柱状图'),
        ('pie', '饼图'),
        ('scatter', '散点图'),
    ]
    
    name = models.CharField(max_length=255)
    chart_type = models.CharField(max_length=50, choices=CHART_TYPES)
    config = models.JSONField()  # ECharts 配置
    dataset = models.ForeignKey('data_entry.Dataset', on_delete=models.CASCADE)
```
#### 5.2.2 前端实现

**图表展示组件：**
```
vue
<!-- components/ChartViewer.vue -->
<template>
  <div ref="chartContainer" class="chart-container"></div>
</template>

<script setup>
import * as echarts from 'echarts'
import { ref, onMounted, watch } from 'vue'

const props = defineProps({
  chartConfig: Object,
  chartData: Object
})

const chartContainer = ref()
let chartInstance = null

onMounted(() => {
  initChart()
})

const initChart = () => {
  chartInstance = echarts.init(chartContainer.value)
  updateChart()
}

const updateChart = () => {
  if (!chartInstance) return
  
  const option = {
    ...props.chartConfig,
    series: props.chartData.series
  }
  
  chartInstance.setOption(option)
}

watch(() => props.chartConfig, updateChart, { deep: true })
watch(() => props.chartData, updateChart, { deep: true })
</script>
```
## 6. 部署方案

### 6.1 开发环境部署

1. 安装依赖：
```bash
   # 后端
   pip install django djangorestframework pandas numpy mysqlclient
   
   # 前端
   npm install vue@next element-plus echarts
```
2. 数据库配置：
```python
   # settings.py
   DATABASES = {
       'default': {
           'ENGINE': 'django.db.backends.mysql',
           'NAME': 'data_system',
           'USER': 'root',
           'PASSWORD': 'password',
           'HOST': 'localhost',
           'PORT': '3306',
       }
   }
```
### 6.2 生产环境部署（可选）

使用 Docker 进行容器化部署：

```dockerfile
# Dockerfile
FROM python:3.9
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY .. .
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
```
## 7. 项目开发计划

### 7.1 第一阶段（当前阶段）- 数据处理与可视化模块

1. 完成数据处理模块核心功能开发
2. 实现数据可视化模块基础功能
3. 开发前后端交互接口
4. 完成单元测试

### 7.2 第二阶段 - 基础功能完善

1. 实现数据填报与展示模块
2. 开发用户中心基础功能
3. 完善权限管理系统
4. 实现首页、关于、帮助页面

### 7.3 第三阶段 - 高级功能开发

1. 实现数据预测模块
2. 添加高级数据处理功能
3. 增强可视化交互功能
4. 系统性能优化

### 7.4 第四阶段 - 系统完善与部署

1. 系统测试与优化
2. 编写完整文档
3. 部署生产环境
4. 用户培训与支持

## 8. 总结

本项目采用模块化设计，便于逐步开发和维护。当前重点实现数据处理与可视化模块，为后续功能扩展打下坚实基础。系统具备良好的扩展性，可根据需求增加更多数据处理算法和可视化图表类型。

